---
name: "comment-generator"
description: "专门用于整理 C/C++ 头文件(.h)。功能包括：代码分区域重排（宏、枚举、结构体、函数等）、添加标准 Doxygen 注释、规范化格式。"
---

# 头文件整理专家 (Header File Organizer & Commenter)

本技能专注于 C/C++ 头文件 (`.h`) 的标准化整理。它不仅生成高质量注释，还负责重构文件布局，使得代码结构清晰、逻辑分层。

## 目标

1.  **布局重构 (Layout Reorganization)**：将代码按类型严格分区（Include -> 宏 -> 枚举 -> 结构体 -> 变量 -> 函数）。
2.  **文档化 (Documentation)**：为所有类型、宏和函数添加 Doxygen 风格的注释。
3.  **规范化 (Standardization)**：确保头文件包含卫士（Include Guard）或 `#pragma once`，并统一缩进和命名风格。
4.  **一致性 (Consistency)**：所有输出和注释必须使用**中文**。

## 布局规则 (Layout Rules)

请严格按照以下顺序重新排列文件内容。如果文件中缺少某个部分，直接跳过。

1.  **文件头 (File Header)**
    - 版权声明、作者、日期。
    - `@file` 和 `@brief` 文件简述。
2.  **头文件卫士 (Include Guard)**
    - `#ifndef ... #define ...` 或 `#pragma once`。
3.  **包含文件 (Includes)**
    - 系统头文件 (`<...>`)
    - 项目头文件 (`"..."`)
4.  **宏定义 (Macros)**
    - 常量宏 (`#define CONST_VAL ...`)
    - 功能宏 (`#define FUNC_MACRO ...`)
5.  **数据类型定义 (Data Types)**
    - **枚举** (`typedef enum`): 相关的枚举放在一起。
    - **结构体** (`typedef struct`): _注意依赖关系，先定义的在前_。
6.  **全局变量声明 (Global Variables)**
    - `extern` 声明的全局变量。
7.  **函数声明 (Function Prototypes)**
    - 按功能模块分组。
    - 关键 API 放在前面。
8.  **结束卫士 (End Guard)**
    - `#endif /* ... */`。

## 注释指令

- **分隔线**: 不同区域之间必须使用注释分隔线，例如：
  ```c
  /* ==================================================================================
   *                                     Macros
   * ================================================================================== */
  ```
- **Doxygen 格式**: 使用 `/** ... */` 块注释。
- **结构体/枚举**: 每个成员后应有 `///<` 行内注释，或者上方有块注释。
- **函数**: 必须包含 `@brief`（简介）、`@param`（参数）、`@return`（返回值）。

## 示例

**整理前 (Before)**:

```c
#include "b.h"
void foo(int a);
#define MAX 100
typedef struct { int x; } Point;
#include <stdio.h>
enum State { IDLE, RUN };
```

**整理后 (After)**:

```c
/**
 * @file header.h
 * @brief [文件简述]
 * @author [作者] LegBot Team
 * @date [日期]
 */

#ifndef HEADER_H_
#define HEADER_H_

/* ==================================================================================
 *                                    Includes
 * ================================================================================== */
#include <stdio.h>
#include "b.h"

/* ==================================================================================
 *                                     Macros
 * ================================================================================== */
#define MAX 100  // 最大允许值

/* ==================================================================================
 *                                   Data Types
 * ================================================================================== */
/** @brief 系统运行状态 */
typedef enum {
    IDLE,   ///< 空闲状态
    RUN     ///< 运行状态
} State;

/** @brief 坐标点结构体 */
typedef struct {
    int x;  ///< X 轴坐标
} Point;

/* ==================================================================================
 *                               Function Prototypes
 * ================================================================================== */
/**
 * @brief  执行 Foo 操作
 * @param  a 输入参数
 * @return void
 */
void foo(int a);

#endif /* HEADER_H_ */
```
